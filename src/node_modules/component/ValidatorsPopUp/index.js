import React, { useState } from 'react'
import './ValidatorsPopUp.sass'
import { connect } from 'react-redux'
import { showPopUp } from 'store/MainPage/actions'

function ValidatorsPopUp(props) {

  const {icon, title, abbr, fee, apy, id, guide, explorerLink, discordLink} = props.popUpInfo

  const [isCopied, setIsCopied] = useState(false)

  return (
    <>
      <div className="popup">
        <div className="popup__overlay" onClick={() => props.showPopUp(false)}></div>
        <div className="popup__window">
          <button className="popup__close" onClick={() => props.showPopUp(false)}>Ã—</button>
            <img src={icon} alt={title} className="popup__icon" />
            <p className="popup__title">{title} ({abbr})</p>
            {apy ? 
            <>
              <p className="popup__apr">Annual percentage yield (APY)</p>
              <p className="popup__apr-value">+{apy}%</p>
            </>
            :null}
            {fee ? 
            <p className="popup__fee">{fee}% validator fee</p>
            :null}
            <p className="popup__line">
              <input type="copy-clip" id="copy-input" className="popup__id" readOnly value={id}/>
              <button onClick={() => {navigator.clipboard.writeText(id); setIsCopied(true)}} className="popup__copy">
                {isCopied ? 'Copied!' : 'Copy'}
              </button>
            </p>
            <div className="popup__info">
              <p className="popup__text">Check validator info in <a href={explorerLink}>Explorer</a></p>
              <p className="popup__text">To get support follow our <a href={discordLink}>Discord</a></p>
              {title === 'Mina' ? 
              <a className="popup__guide" href="https://docs.staketab.com/how-to-stake/mina" target="_blank">Mina staking guide</a>
              :null}
            </div>
        </div>
      </div>
    </>
  )
}

const mapStateToProps = (state) => {
  return {
    popUpInfo: state.reducerMainPage.popUpInfo
  }
}

const mapDispatchToProps = {
  showPopUp
}

export default connect(mapStateToProps, mapDispatchToProps)(ValidatorsPopUp)