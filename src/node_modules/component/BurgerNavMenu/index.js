import React, { useState } from 'react'
import { NavLink } from 'react-router-dom'
import './BurgerNavMenu.sass'
import {ReactComponent as LogoIcon} from "assets/img/staketabLogo.svg";

export default function BurgerNavMenu(props) {
  return (
    <>
      {props.opened ?
        <>
          {
            props.navbarFixed ? 
            <div onClick={props.toggleOpened} className="burgerNavMenu__close-container">
              <div className="burgerNavMenu__close"></div>
            </div>
            : null
          }
          <div className={`burgerNavMenu__window${props.navbarFixed ? ' burgerNavMenu__window_fixed' : ''}`}>
            {
              !props.navbarFixed ? 
              <div onClick={props.toggleOpened} className="burgerNavMenu__close-container">
                <div className="burgerNavMenu__close"></div>
              </div>
              : null
            }
            <a onClick={props.toggleOpened} className="burgerNavMenu__link" onClick={e => {props.handler(e, props.topRef); props.toggleOpened()}} ><LogoIcon/></a>
            {props.links.map(elem => {
              if (elem.children)
                return (
                    elem.children.map(elem =>
                        elem.href ? <NavLink key={elem.text} to={elem.href} className={`burgerNavMenu__link`}>
                          {elem.text}
                        </NavLink>
                            :
                            <a className={`burgerNavMenu__link${props.active === elem.text ? ' active' : ''}`} key={elem.text} onClick={e => {props.handler(e, elem.ref); props.toggleOpened()}} >{elem.text}</a>
                    )
                )
              return elem.ref ?
              <a className={`burgerNavMenu__link${props.active === elem.text ? ' active' : ''}`} key={elem.text} onClick={e => {props.handler(e, elem.ref); props.toggleOpened()}} >{elem.text}</a>
              :
              <a className={`burgerNavMenu__link`} key={elem.text} href={elem.href} target="_blank" onClick={e => props.toggleOpened()} >{elem.text}</a>
            })}
          </div>
        </>
        :
        <div className="burgerNavMenu">
          <div onClick={props.toggleOpened} className="burgerNavMenu__burger-container">
            <div className="burgerNavMenu__burger"></div>
          </div>
        </div>
      }
    </>
  )
}
